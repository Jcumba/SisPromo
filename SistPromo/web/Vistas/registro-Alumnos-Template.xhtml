<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      template="/WEB-INF/template.xhtml">
    <h:head>
        <title>TODO supply a title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </h:head>
    <h:body>
        <ui:composition template="../Template/Template.xhtml">
            <ui:define name="content">
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default panel-table" >
                            <div class="panel-heading">
                                <div class="panel-tools">
                                    <a href="#" class="tools-icon">
                                        <i class="zmdi zmdi-refresh"></i>
                                    </a>
                                    <a href="#" class="tools-icon">
                                        <i class="zmdi zmdi-close"></i>
                                    </a>
                                </div>
                                <h3 class="panel-title">REGISTRO Y LISTADO DE ALUMNOS</h3>
                                <div class="panel-subtitle">registros y listados de alumnos</div>
                            </div>
                            <div class="panel-body" >
                                <div id="realtime" style="height: 550px">
                                    <h:form id="form"   >
                                        <p:growl id="msg" life="1500" autoUpdate="true"/>
                                        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank">
                                            <p:outputLabel value="Seleccione la Carrera:" />
                                            <p:selectOneMenu styleClass="selectpicker" value="#{alumnoC.alumno.CARRERA_CODCAR}" >
                                                <f:selectItem  noSelectionOption="true" itemLabel="Seleccione" itemValue="#{null}" />
                                                <f:selectItems  value="#{carreraC.lstCarrera}" var="carrera"  itemLabel="#{carrera.NOMCAR}" itemValue="#{carrera.CODCAR}"/>
                                            </p:selectOneMenu>


                                            <p:outputLabel value="Nombres:" />
                                            <p:inputText    value="#{alumnoC.alumno.NOMPER}" onkeyup="this.value = this.value.toUpperCase();">
                                                <p:keyFilter regEx="/[a-z_ ]/i"/> 	
                                            </p:inputText>

                                            <p:outputLabel value="Apellidos:" />
                                            <p:inputText value="#{alumnoC.alumno.APEPER}" onkeyup="this.value = this.value.toUpperCase();">
                                                <p:keyFilter regEx="/[a-z_ ]/i"/>
                                            </p:inputText>


                                            <p:outputLabel value="DNI:" />
                                            <p:inputText value="#{alumnoC.alumno.DNIPER}"   maxlength="8">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputText>

                                            <p:outputLabel value="Fecha Nacimiento:" />
                                            <p:inputMask id="date" value="#{alumnoC.alumno.FECNACPER}"   mask="99/99/9999"/>



                                            <p:outputLabel value="Celular:" />
                                            <p:inputText value="#{alumnoC.alumno.CELPER}"   maxlength="9">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputText>

                                            <p:outputLabel value="Distrito:" />
                                            <p:autoComplete  maxResults="16"  
                                                             emptyMessage="No se encontro ningún registro"
                                                             value="#{alumnoC.alumno.UBIGEO_CODUBI}"
                                                             completeMethod="#{alumnoC.completeTextUbi}"
                                                             maxlength="15">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:autoComplete>

                                            <p:outputLabel value="Colegio:" />
                                            <p:autoComplete  maxResults="10" emptyMessage="No se encontro ningún registro"
                                                             value="#{alumnoC.alumno.CODCOL}"        
                                                             completeMethod="#{alumnoC.completeTextCol}"
                                                             maxlength="15">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:autoComplete>

                                            <p:commandButton class="waves-effect waves-light btn-small blue darken-1 s12 m7"  value="Regitrar" actionListener="#{alumnoC.guardarAlumno()}" update="form"/>
                                            <!--class="waves-effect waves-light btn-small blue darken-1 s12 m7"-->
                                        </p:panelGrid>
                                    </h:form>
                                    
                                    <h:form id="FormTblAlum">
                                        <p:dataTable var="alumno" value="#{alumnoC.lstAlumno}" rows="10"
                                                     class="table table-striped"
                                                     paginator="true"
                                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,15">
                                            <p:column headerText="Nombres">
                                                <h:outputText value="#{alumno.NOMPER}" />
                                            </p:column>
                                            <p:column headerText="Apellidos">
                                                <h:outputText value="#{alumno.APEPER}" />
                                            </p:column>
                                            <p:column headerText="DNI">
                                                <h:outputText value="#{alumno.DNIPER}" />
                                            </p:column>
                                            <p:column headerText="Telefono - Celular ">
                                                <h:outputText value="#{alumno.CELPER}" />
                                            </p:column>
                                        </p:dataTable>
                                    </h:form>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>




                <footer class="page-footer grey lighten-5">
                    <div class="footer-copyright">
                        <div class="container" style="color: #000">
                            <img src="../resources/images/ESCUDO.png" alt="" width="30px"/>
                            © 2019 Instituto Superior Tecnico 
                            <a class="black-text text-lighten-4 right " href="https://www.vallegrande.edu.pe/" >Valle Grande</a>
                        </div>
                    </div>
                </footer>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
